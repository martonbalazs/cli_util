#!/bin/bash

# Client to cpucsekk_server
# Stand in queue
# Tell us why

inicheck=0.5	#Initial wait in queue. Better the server acts first if it can.
checkint=1	#How often to look into queue
ourpid=$$

echo "$ourpid" >> /tmp/cpucsekk_$USER/cpucsekk_queue
sleep $inicheck

while true
do
 #If we find our own pid:
 if grep -q "$ourpid" /tmp/cpucsekk_$USER/cpucsekk_queue
 then
  sleep $checkint

 #If we don't find our own pid then terminate
 else
  break
 fi
done
